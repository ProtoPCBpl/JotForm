<!DOCTYPE html>
<html lang="pl" style="height: 100%;">
    <head>
        <style>.center {
        text-align: center;
        border-style: none;
        background-color: #f7f6f1;
        font-family: Open Sans, sans-serif;
        }
        </style>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
        <meta http-equiv="x-ua-compatible" content="IE=11"/>
        <title>Patrttrrczkomaty 24/7</title>
        <script src="https://geowidget.easypack24.net/js/sdk-for-javascript.js"></script>
        <script src="//js.jotform.com/JotFormCustomWidget.min.js"></script>

        <script type="text/javascript">

          window.easyPackAsyncInit = function () {
            easyPack.init({
                defaultLocale: 'pl',
                mapType: 'osm',
                searchType: 'osm',
                points: {
                    types: ['parcel_locker'],
                    functions: ['parcel_collect']
                },
                map: {
                    initialTypes: ['parcel_locker']
                }
            });

            var map = easyPack.mapWidget('easypack-map', function(point) {
              console.log(point.name);
              console.log(point.address_details.street);
              console.log(point.address_details.building_number);
              console.log(point.address_details.post_code);
              console.log(point.address_details.city);
              // var p1 = "point.name"; var p2 = 'point.name'; var p3 = point.name;
              // console.log("Sample log message with parameters: %s, %s, %s", p1, p2, p3);
                document.getElementById('pName').value = point.name;
                document.getElementById('pAddress1').value = point.address.line1;
                document.getElementById('pAddress2').value = point.address.line2;

            });
          };
      
            //always subscribe to ready event and implement widget related code
            //inside callback function , it is the best practice while developing widgets
            JFCustomWidget.subscribe("ready", function(){

                var label = JFCustomWidget.getWidgetSetting('QuestionLabel');
                document.getElementById('labelText').innerHTML = label;

                //subscribe to form submit event
                JFCustomWidget.subscribe("submit", function() {
    var result = {}
    //this part will be used if your field is required. If your widget is required valid
    //property will be expected before form can be submitted
    result.valid = true;
    //this is your field result. You are expected to send value property as string
    result.value = "my precious data"
    //most probably you will call sendSubmit method
    JFCustomWidget.sendSubmit(result)
});
            });
        </script>

        <link rel="stylesheet" href="https://geowidget.easypack24.net/css/easypack.css"/>
    </head>

    <body style="background-color: #f7f6f1;">
        <div id="easypack-map"></div>
        <div id="main" class="center">
            <h3>Wybrany paczkomat:</h3>
            <div>
                <span id="labelText"></span>
                <input class="center type="text" id="pName" readonly>
            </div><br>
            <div>
                <input class="center type="text" id="pAddress1" readonly>
            </div>
            <div>
                <input class="center type="text" id="pAddress2" readonly>
            </div>
        </div>
    </body>
</html>
